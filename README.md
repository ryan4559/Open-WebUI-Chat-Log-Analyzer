# Open WebUI Chat Log Analyzer

*This project was generated by Gemini CLI.*


This project contains a set of scripts to parse and analyze chat logs exported from Open WebUI.

- [English](#english-version)
- [中文版](#中文版)

---

## English Version

### Features

- Converts large JSON chat exports into a structured SQLite database.
- Analyzes the data to provide insights, such as monthly usage statistics.
- Provides a batch script (`run_analysis.bat`) to automate the entire process.
- Automatically detects the `.json` file in the directory, so no hardcoding is needed.

### Example Output

```
Chat Usage Statistics (by Month):
==============================
Month      | Usage Count
------------------------------
2025-01    | 8
2025-02    | 42
2025-03    | 195
2025-04    | 140
2025-05    | 175
2025-06    | 160
2025-07    | 90
==============================
```

### How to Use

1.  **Place your JSON export file** in this directory. Please ensure there is only **one** `.json` file present.
2.  **Run the batch script**: Simply double-click `run_analysis.bat`.

The script will automatically:
- Create a Python virtual environment (`venv`) if it doesn't exist.
- Install the necessary dependencies.
- Convert the detected JSON file into a correspondingly named SQLite database (e.g., `my_export.json` -> `my_export.db`).
- Run the analysis script to display monthly usage statistics.

### Scripts

- `json_to_sqlite.py`: The core script that handles the conversion from JSON to the SQLite database. It can be run manually by passing a JSON filename as an argument.
- `analyze_monthly_usage.py`: The script that queries the database and generates the monthly usage report.
- `run_analysis.bat`: The main batch file to automate the entire workflow.
- `get_json_structure.py`: A utility script to inspect the structure of the first object in the JSON file. Useful for debugging or extending functionality.

---

## 中文版

### 功能

- 將大型的 Open WebUI JSON 匯出檔轉換為結構化的 SQLite 資料庫。
- 分析資料以提供洞見，例如按月份統計的使用次數。
- 提供批次處理腳本 (`run_analysis.bat`) 來自動化整個流程。
- 自動偵測目錄下的 `.json` 檔案，無需手動修改腳本中的檔名。

### 範例輸出

```
聊天使用次數統計 (按月份):
==============================
月份         | 使用次數
------------------------------
2025-01    | 8
2025-02    | 42
2025-03    | 195
2025-04    | 140
2025-05    | 175
2025-06    | 160
2025-07    | 90
==============================
```

### 如何使用

1.  **將您的 JSON 匯出檔**放置在此目錄中。請確保目錄中**只有一個** `.json` 檔案。
2.  **執行批次處理腳本**：直接雙擊 `run_analysis.bat` 即可。

這個腳本將會自動完成以下所有步驟：
- 建立一個 Python 虛擬環境 (`venv`) (如果它不存在的話)。
- 安裝所需的相依套件。
- 將偵測到的 JSON 檔案轉換為對應名稱的 SQLite 資料庫 (例如 `my_export.json` -> `my_export.db`)。
- 執行分析腳本以顯示月份使用統計。

### 主要腳本

- `json_to_sqlite.py`: 核心的轉換腳本，負責將 JSON 轉換為 SQLite 資料庫。您可以手動執行它，並將 JSON 檔名作為參數傳入。
- `analyze_monthly_usage.py`: 查詢資料庫並產生月份使用報告的分析腳本。
- `run_analysis.bat`: 自動化整個工作流程的主要批次處理檔案。
- `get_json_structure.py`: 一個輔助工具，用來檢查 JSON 檔案中第一個物件的結構。有助於除錯或擴充功能。